{"ast":null,"code":"import _objectSpread from \"/Users/ferncliffadmin/clawd/projects/thesalessherpa/src/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport * as React from 'react';\nimport { clsx } from 'clsx';\nimport Input from \"../Input\";\nimport { useSelectInputContext } from \"../context\";\nimport useBaseProps from \"../../hooks/useBaseProps\";\nimport Placeholder from \"./Placeholder\";\nimport SelectContext from \"../../SelectContext\";\nimport { getTitle } from \"../../utils/commonUtil\";\nconst SingleContent = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    inputProps\n  } = _ref;\n  const {\n    prefixCls,\n    searchValue,\n    activeValue,\n    displayValues,\n    maxLength,\n    mode\n  } = useSelectInputContext();\n  const {\n    triggerOpen,\n    title: rootTitle,\n    showSearch,\n    classNames,\n    styles\n  } = useBaseProps();\n  const selectContext = React.useContext(SelectContext);\n  const [inputChanged, setInputChanged] = React.useState(false);\n  const combobox = mode === 'combobox';\n  const displayValue = displayValues[0];\n\n  // Implement the same logic as the old SingleSelector\n  const mergedSearchValue = React.useMemo(() => {\n    if (combobox && activeValue && !inputChanged && triggerOpen) {\n      return activeValue;\n    }\n    return showSearch ? searchValue : '';\n  }, [combobox, activeValue, inputChanged, triggerOpen, searchValue, showSearch]);\n  const [optionClassName, optionStyle, optionTitle, hasOptionStyle] = React.useMemo(() => {\n    let className;\n    let style;\n    let titleValue;\n    if (displayValue && selectContext !== null && selectContext !== void 0 && selectContext.flattenOptions) {\n      const option = selectContext.flattenOptions.find(opt => opt.value === displayValue.value);\n      if (option !== null && option !== void 0 && option.data) {\n        className = option.data.className;\n        style = option.data.style;\n        titleValue = getTitle(option.data);\n      }\n    }\n    if (displayValue && !titleValue) {\n      titleValue = getTitle(displayValue);\n    }\n    if (rootTitle !== undefined) {\n      titleValue = rootTitle;\n    }\n    const nextHasStyle = !!className || !!style;\n    return [className, style, titleValue, nextHasStyle];\n  }, [displayValue, selectContext === null || selectContext === void 0 ? void 0 : selectContext.flattenOptions, rootTitle]);\n  React.useEffect(() => {\n    if (combobox) {\n      setInputChanged(false);\n    }\n  }, [combobox, activeValue]);\n\n  // ========================== Render ==========================\n  const showHasValueCls = displayValue && displayValue.label !== null && displayValue.label !== undefined && String(displayValue.label).trim() !== '';\n\n  // Render value\n  const renderValue = displayValue ? hasOptionStyle ? /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(\"\".concat(prefixCls, \"-content-value\"), optionClassName),\n    style: _objectSpread(_objectSpread({}, mergedSearchValue ? {\n      visibility: 'hidden'\n    } : {}), optionStyle),\n    title: optionTitle\n  }, displayValue.label) : displayValue.label : /*#__PURE__*/React.createElement(Placeholder, {\n    show: !mergedSearchValue\n  });\n\n  // Render\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(\"\".concat(prefixCls, \"-content\"), showHasValueCls && \"\".concat(prefixCls, \"-content-has-value\"), mergedSearchValue && \"\".concat(prefixCls, \"-content-has-search-value\"), hasOptionStyle && \"\".concat(prefixCls, \"-content-has-option-style\"), classNames === null || classNames === void 0 ? void 0 : classNames.content),\n    style: styles === null || styles === void 0 ? void 0 : styles.content,\n    title: hasOptionStyle ? undefined : optionTitle\n  }, renderValue, /*#__PURE__*/React.createElement(Input, _extends({\n    ref: ref\n  }, inputProps, {\n    value: mergedSearchValue,\n    maxLength: mode === 'combobox' ? maxLength : undefined,\n    onChange: e => {\n      var _inputProps$onChange;\n      setInputChanged(true);\n      (_inputProps$onChange = inputProps.onChange) === null || _inputProps$onChange === void 0 || _inputProps$onChange.call(inputProps, e);\n    }\n  })));\n});\nexport default SingleContent;","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","clsx","Input","useSelectInputContext","useBaseProps","Placeholder","SelectContext","getTitle","SingleContent","forwardRef","_ref","ref","inputProps","prefixCls","searchValue","activeValue","displayValues","maxLength","mode","triggerOpen","title","rootTitle","showSearch","classNames","styles","selectContext","useContext","inputChanged","setInputChanged","useState","combobox","displayValue","mergedSearchValue","useMemo","optionClassName","optionStyle","optionTitle","hasOptionStyle","className","style","titleValue","flattenOptions","option","find","opt","value","data","undefined","nextHasStyle","useEffect","showHasValueCls","label","String","trim","renderValue","createElement","concat","_objectSpread","visibility","show","content","onChange","e","_inputProps$onChange"],"sources":["/Users/ferncliffadmin/clawd/projects/thesalessherpa/src/client/node_modules/@rc-component/select/es/SelectInput/Content/SingleContent.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from 'react';\nimport { clsx } from 'clsx';\nimport Input from \"../Input\";\nimport { useSelectInputContext } from \"../context\";\nimport useBaseProps from \"../../hooks/useBaseProps\";\nimport Placeholder from \"./Placeholder\";\nimport SelectContext from \"../../SelectContext\";\nimport { getTitle } from \"../../utils/commonUtil\";\nconst SingleContent = /*#__PURE__*/React.forwardRef(({\n  inputProps\n}, ref) => {\n  const {\n    prefixCls,\n    searchValue,\n    activeValue,\n    displayValues,\n    maxLength,\n    mode\n  } = useSelectInputContext();\n  const {\n    triggerOpen,\n    title: rootTitle,\n    showSearch,\n    classNames,\n    styles\n  } = useBaseProps();\n  const selectContext = React.useContext(SelectContext);\n  const [inputChanged, setInputChanged] = React.useState(false);\n  const combobox = mode === 'combobox';\n  const displayValue = displayValues[0];\n\n  // Implement the same logic as the old SingleSelector\n  const mergedSearchValue = React.useMemo(() => {\n    if (combobox && activeValue && !inputChanged && triggerOpen) {\n      return activeValue;\n    }\n    return showSearch ? searchValue : '';\n  }, [combobox, activeValue, inputChanged, triggerOpen, searchValue, showSearch]);\n  const [optionClassName, optionStyle, optionTitle, hasOptionStyle] = React.useMemo(() => {\n    let className;\n    let style;\n    let titleValue;\n    if (displayValue && selectContext?.flattenOptions) {\n      const option = selectContext.flattenOptions.find(opt => opt.value === displayValue.value);\n      if (option?.data) {\n        className = option.data.className;\n        style = option.data.style;\n        titleValue = getTitle(option.data);\n      }\n    }\n    if (displayValue && !titleValue) {\n      titleValue = getTitle(displayValue);\n    }\n    if (rootTitle !== undefined) {\n      titleValue = rootTitle;\n    }\n    const nextHasStyle = !!className || !!style;\n    return [className, style, titleValue, nextHasStyle];\n  }, [displayValue, selectContext?.flattenOptions, rootTitle]);\n  React.useEffect(() => {\n    if (combobox) {\n      setInputChanged(false);\n    }\n  }, [combobox, activeValue]);\n\n  // ========================== Render ==========================\n  const showHasValueCls = displayValue && displayValue.label !== null && displayValue.label !== undefined && String(displayValue.label).trim() !== '';\n\n  // Render value\n  const renderValue = displayValue ? hasOptionStyle ? /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(`${prefixCls}-content-value`, optionClassName),\n    style: {\n      ...(mergedSearchValue ? {\n        visibility: 'hidden'\n      } : {}),\n      ...optionStyle\n    },\n    title: optionTitle\n  }, displayValue.label) : displayValue.label : /*#__PURE__*/React.createElement(Placeholder, {\n    show: !mergedSearchValue\n  });\n\n  // Render\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(`${prefixCls}-content`, showHasValueCls && `${prefixCls}-content-has-value`, mergedSearchValue && `${prefixCls}-content-has-search-value`, hasOptionStyle && `${prefixCls}-content-has-option-style`, classNames?.content),\n    style: styles?.content,\n    title: hasOptionStyle ? undefined : optionTitle\n  }, renderValue, /*#__PURE__*/React.createElement(Input, _extends({\n    ref: ref\n  }, inputProps, {\n    value: mergedSearchValue,\n    maxLength: mode === 'combobox' ? maxLength : undefined,\n    onChange: e => {\n      setInputChanged(true);\n      inputProps.onChange?.(e);\n    }\n  })));\n});\nexport default SingleContent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}