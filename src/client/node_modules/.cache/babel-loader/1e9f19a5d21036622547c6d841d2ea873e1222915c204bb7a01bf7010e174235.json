{"ast":null,"code":"import * as React from 'react';\n\n/**\n * Size info need loop query for the `heights` which will has the perf issue.\n * Let cache result for each render phase.\n */\nexport function useGetSize(mergedData, getKey, heights, itemHeight) {\n  const [key2Index, bottomList] = React.useMemo(() => [new Map(), []], [mergedData, heights.id, itemHeight]);\n  const getSize = function (startKey) {\n    let endKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : startKey;\n    // Get from cache first\n    let startIndex = key2Index.get(startKey);\n    let endIndex = key2Index.get(endKey);\n\n    // Loop to fill the cache\n    if (startIndex === undefined || endIndex === undefined) {\n      const dataLen = mergedData.length;\n      for (let i = bottomList.length; i < dataLen; i += 1) {\n        var _heights$get;\n        const item = mergedData[i];\n        const key = getKey(item);\n        key2Index.set(key, i);\n        const cacheHeight = (_heights$get = heights.get(key)) !== null && _heights$get !== void 0 ? _heights$get : itemHeight;\n        bottomList[i] = (bottomList[i - 1] || 0) + cacheHeight;\n        if (key === startKey) {\n          startIndex = i;\n        }\n        if (key === endKey) {\n          endIndex = i;\n        }\n        if (startIndex !== undefined && endIndex !== undefined) {\n          break;\n        }\n      }\n    }\n    return {\n      top: bottomList[startIndex - 1] || 0,\n      bottom: bottomList[endIndex]\n    };\n  };\n  return getSize;\n}","map":{"version":3,"names":["React","useGetSize","mergedData","getKey","heights","itemHeight","key2Index","bottomList","useMemo","Map","id","getSize","startKey","endKey","arguments","length","undefined","startIndex","get","endIndex","dataLen","i","_heights$get","item","key","set","cacheHeight","top","bottom"],"sources":["/Users/ferncliffadmin/clawd/projects/thesalessherpa/src/client/node_modules/@rc-component/virtual-list/es/hooks/useGetSize.js"],"sourcesContent":["import * as React from 'react';\n\n/**\n * Size info need loop query for the `heights` which will has the perf issue.\n * Let cache result for each render phase.\n */\nexport function useGetSize(mergedData, getKey, heights, itemHeight) {\n  const [key2Index, bottomList] = React.useMemo(() => [new Map(), []], [mergedData, heights.id, itemHeight]);\n  const getSize = (startKey, endKey = startKey) => {\n    // Get from cache first\n    let startIndex = key2Index.get(startKey);\n    let endIndex = key2Index.get(endKey);\n\n    // Loop to fill the cache\n    if (startIndex === undefined || endIndex === undefined) {\n      const dataLen = mergedData.length;\n      for (let i = bottomList.length; i < dataLen; i += 1) {\n        const item = mergedData[i];\n        const key = getKey(item);\n        key2Index.set(key, i);\n        const cacheHeight = heights.get(key) ?? itemHeight;\n        bottomList[i] = (bottomList[i - 1] || 0) + cacheHeight;\n        if (key === startKey) {\n          startIndex = i;\n        }\n        if (key === endKey) {\n          endIndex = i;\n        }\n        if (startIndex !== undefined && endIndex !== undefined) {\n          break;\n        }\n      }\n    }\n    return {\n      top: bottomList[startIndex - 1] || 0,\n      bottom: bottomList[endIndex]\n    };\n  };\n  return getSize;\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;;AAE9B;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAACC,UAAU,EAAEC,MAAM,EAAEC,OAAO,EAAEC,UAAU,EAAE;EAClE,MAAM,CAACC,SAAS,EAAEC,UAAU,CAAC,GAAGP,KAAK,CAACQ,OAAO,CAAC,MAAM,CAAC,IAAIC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAACP,UAAU,EAAEE,OAAO,CAACM,EAAE,EAAEL,UAAU,CAAC,CAAC;EAC1G,MAAMM,OAAO,GAAG,SAAAA,CAACC,QAAQ,EAAwB;IAAA,IAAtBC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGF,QAAQ;IAC1C;IACA,IAAIK,UAAU,GAAGX,SAAS,CAACY,GAAG,CAACN,QAAQ,CAAC;IACxC,IAAIO,QAAQ,GAAGb,SAAS,CAACY,GAAG,CAACL,MAAM,CAAC;;IAEpC;IACA,IAAII,UAAU,KAAKD,SAAS,IAAIG,QAAQ,KAAKH,SAAS,EAAE;MACtD,MAAMI,OAAO,GAAGlB,UAAU,CAACa,MAAM;MACjC,KAAK,IAAIM,CAAC,GAAGd,UAAU,CAACQ,MAAM,EAAEM,CAAC,GAAGD,OAAO,EAAEC,CAAC,IAAI,CAAC,EAAE;QAAA,IAAAC,YAAA;QACnD,MAAMC,IAAI,GAAGrB,UAAU,CAACmB,CAAC,CAAC;QAC1B,MAAMG,GAAG,GAAGrB,MAAM,CAACoB,IAAI,CAAC;QACxBjB,SAAS,CAACmB,GAAG,CAACD,GAAG,EAAEH,CAAC,CAAC;QACrB,MAAMK,WAAW,IAAAJ,YAAA,GAAGlB,OAAO,CAACc,GAAG,CAACM,GAAG,CAAC,cAAAF,YAAA,cAAAA,YAAA,GAAIjB,UAAU;QAClDE,UAAU,CAACc,CAAC,CAAC,GAAG,CAACd,UAAU,CAACc,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAIK,WAAW;QACtD,IAAIF,GAAG,KAAKZ,QAAQ,EAAE;UACpBK,UAAU,GAAGI,CAAC;QAChB;QACA,IAAIG,GAAG,KAAKX,MAAM,EAAE;UAClBM,QAAQ,GAAGE,CAAC;QACd;QACA,IAAIJ,UAAU,KAAKD,SAAS,IAAIG,QAAQ,KAAKH,SAAS,EAAE;UACtD;QACF;MACF;IACF;IACA,OAAO;MACLW,GAAG,EAAEpB,UAAU,CAACU,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC;MACpCW,MAAM,EAAErB,UAAU,CAACY,QAAQ;IAC7B,CAAC;EACH,CAAC;EACD,OAAOR,OAAO;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}