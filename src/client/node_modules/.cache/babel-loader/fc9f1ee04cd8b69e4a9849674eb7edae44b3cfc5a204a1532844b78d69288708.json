{"ast":null,"code":"import _defineProperty from \"/Users/ferncliffadmin/clawd/projects/thesalessherpa/src/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nconst SPLIT = '__@field_split__';\n\n/**\n * Convert name path into string to fast the fetch speed of Map.\n */\nfunction normalize(namePath) {\n  return namePath.map(cell => \"\".concat(typeof cell, \":\").concat(cell))\n  // Magic split\n  .join(SPLIT);\n}\n\n/**\n * NameMap like a `Map` but accepts `string[]` as key.\n */\nclass NameMap {\n  constructor() {\n    _defineProperty(this, \"kvs\", new Map());\n  }\n  set(key, value) {\n    this.kvs.set(normalize(key), value);\n  }\n  get(key) {\n    return this.kvs.get(normalize(key));\n  }\n  getAsPrefix(key) {\n    const normalizedKey = normalize(key);\n    const normalizedPrefix = normalizedKey + SPLIT;\n    const results = [];\n    const current = this.kvs.get(normalizedKey);\n    if (current !== undefined) {\n      results.push(current);\n    }\n    this.kvs.forEach((value, itemNormalizedKey) => {\n      if (itemNormalizedKey.startsWith(normalizedPrefix)) {\n        results.push(value);\n      }\n    });\n    return results;\n  }\n  update(key, updater) {\n    const origin = this.get(key);\n    const next = updater(origin);\n    if (!next) {\n      this.delete(key);\n    } else {\n      this.set(key, next);\n    }\n  }\n  delete(key) {\n    this.kvs.delete(normalize(key));\n  }\n\n  // Since we only use this in test, let simply realize this\n  map(callback) {\n    return [...this.kvs.entries()].map(_ref => {\n      let [key, value] = _ref;\n      const cells = key.split(SPLIT);\n      return callback({\n        key: cells.map(cell => {\n          const [, type, unit] = cell.match(/^([^:]*):(.*)$/);\n          return type === 'number' ? Number(unit) : unit;\n        }),\n        value\n      });\n    });\n  }\n  toJSON() {\n    const json = {};\n    this.map(_ref2 => {\n      let {\n        key,\n        value\n      } = _ref2;\n      json[key.join('.')] = value;\n      return null;\n    });\n    return json;\n  }\n}\nexport default NameMap;","map":{"version":3,"names":["SPLIT","normalize","namePath","map","cell","concat","join","NameMap","constructor","_defineProperty","Map","set","key","value","kvs","get","getAsPrefix","normalizedKey","normalizedPrefix","results","current","undefined","push","forEach","itemNormalizedKey","startsWith","update","updater","origin","next","delete","callback","entries","_ref","cells","split","type","unit","match","Number","toJSON","json","_ref2"],"sources":["/Users/ferncliffadmin/clawd/projects/thesalessherpa/src/client/node_modules/@rc-component/form/es/utils/NameMap.js"],"sourcesContent":["const SPLIT = '__@field_split__';\n\n/**\n * Convert name path into string to fast the fetch speed of Map.\n */\nfunction normalize(namePath) {\n  return namePath.map(cell => `${typeof cell}:${cell}`)\n  // Magic split\n  .join(SPLIT);\n}\n\n/**\n * NameMap like a `Map` but accepts `string[]` as key.\n */\nclass NameMap {\n  kvs = new Map();\n  set(key, value) {\n    this.kvs.set(normalize(key), value);\n  }\n  get(key) {\n    return this.kvs.get(normalize(key));\n  }\n  getAsPrefix(key) {\n    const normalizedKey = normalize(key);\n    const normalizedPrefix = normalizedKey + SPLIT;\n    const results = [];\n    const current = this.kvs.get(normalizedKey);\n    if (current !== undefined) {\n      results.push(current);\n    }\n    this.kvs.forEach((value, itemNormalizedKey) => {\n      if (itemNormalizedKey.startsWith(normalizedPrefix)) {\n        results.push(value);\n      }\n    });\n    return results;\n  }\n  update(key, updater) {\n    const origin = this.get(key);\n    const next = updater(origin);\n    if (!next) {\n      this.delete(key);\n    } else {\n      this.set(key, next);\n    }\n  }\n  delete(key) {\n    this.kvs.delete(normalize(key));\n  }\n\n  // Since we only use this in test, let simply realize this\n  map(callback) {\n    return [...this.kvs.entries()].map(([key, value]) => {\n      const cells = key.split(SPLIT);\n      return callback({\n        key: cells.map(cell => {\n          const [, type, unit] = cell.match(/^([^:]*):(.*)$/);\n          return type === 'number' ? Number(unit) : unit;\n        }),\n        value\n      });\n    });\n  }\n  toJSON() {\n    const json = {};\n    this.map(({\n      key,\n      value\n    }) => {\n      json[key.join('.')] = value;\n      return null;\n    });\n    return json;\n  }\n}\nexport default NameMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}